<mat-sidenav-container>
<!--Folders SideNav-->
  <mat-sidenav mode="side"  disableClose  opened position="start" class="side">
    <button  [disabled]="profile" class="button" [routerLink]= "['/main','Profile']"queryParamsHandling="preserve" routerLinkActive="active">Profile</button>
    <button  [disabled]="make" class="button" [routerLink]= "['/main','Create']"queryParamsHandling="preserve" routerLinkActive="active">Make message</button>
    <button  [disabled]="viewI" class="button"[routerLink]="['/main','Inbox']" queryParamsHandling="preserve" routerLinkActive="active">Inbox</button>
    <button  [disabled]="viewS" class="button"[routerLink]="['/main','Sent']"queryParamsHandling="preserve" routerLinkActive="active">Sent</button>
    <button  [disabled]="viewD" class="button"[routerLink]="['/main','Drafted']"queryParamsHandling="preserve" routerLinkActive="active">Draft</button>
    <button  [disabled]="viewT" class="button"[routerLink]="['/main','Deleted']" queryParamsHandling="preserve" routerLinkActive="active">Deleted</button>
    <button  [disabled]="search" class="button"[routerLink]="['/main','Search']"queryParamsHandling="preserve"  routerLinkActive="active">Search</button>
    <button (click) = "Logout()" class="logout" routerLinkActive = "active">LogOut</button>
   </mat-sidenav>
   <router-outlet></router-outlet>

<!--Folder Tables-->
   <mat-sidenav-content>
    <div class ="view" *ngIf="clickedRows.length != 0">
      <div>
        TO: <b>{{clickedRows[0].body.body}}</b>
      </div>
      <div>
        FROM: <b>{{clickedRows[0].body.body}}</b>
      </div>
      <div>
        SUBJECT: <b>{{clickedRows[0].header.subject}}</b>
      </div>
      <div>
        Date: <b>{{clickedRows[0].date}}</b>
      </div>
      <div>
        Body: <b>{{clickedRows[0].body.body}}</b>
      </div>
      <div>
        attachements: <div *ngFor="let att of clickedRows[0].attachments.attachements"><b><a href="file:///{{att}}" download>attachement</a></b></div>
      </div>
    </div>
    <app-profile *ngIf="profile"></app-profile>
    <app-maker *ngIf="make"></app-maker>
    <app-search *ngIf="search"></app-search>
   </mat-sidenav-content>



<!--Filter Side Nav-->
  <mat-sidenav mode="side"  disableClose  opened position="end" class="side1">
    <div>
    <button (click)="sorting('Date')">Date</button>
    <button (click)="sorting('priority')">Pirority</button>
    <button>Body</button>
  </div>

  <div *ngIf="dataSource != undefined">
    <table *ngIf="view" mat-table [dataSource]="dataSource" >
      <ng-container matColumnDef="select">

      </ng-container>
      <ng-container  [matColumnDef]="column" *ngFor="let column of displayedColumns">
        <div *ngIf="column == ' '">
          <td mat-cell *matCellDef="let row" >
            <mat-checkbox
                          (click)="$event.stopPropagation()"
                      (change)="$event ? selection.toggle(row['ID']) : null"
                      [checked]="selection.isSelected(row)"
                          >
            </mat-checkbox>
          </td>
        </div>

        <th mat-header-cell *matHeaderCellDef> {{column}} </th>
        <div *ngIf="column == 'body'"
             ><td mat-cell (click)="addClickedRows(emp)" *matCellDef="let emp">{{emp[column][column]}}</td>
            </div>

             <div *ngIf="column == 'subject'">
               <td mat-cell (click)="addClickedRows(emp)" *matCellDef="let emp">{{emp['header'][column]}}</td>
              </div>
        <td mat-cell (click)="addClickedRows(emp)" *matCellDef="let emp"> {{emp[column]}} </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
  <div *ngIf="!(router.url.includes('Profile') || router.url.includes('Create'))">
    <!--Paginator buttons-->
    <button (click)="decreasePage()">⬅️</button>
    {{page}}
    <button (click)="increasePage()" >➡️</button>
    </div>
    <!--------------------------------------------------------------------------------------------------------->
    <div>
      <button (click) ="DeleteSelected()">
        Delete
      </button>
      <button>
        move
      </button>
    </div>

</mat-sidenav>

</mat-sidenav-container>
